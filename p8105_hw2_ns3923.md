p8105_hw2_ns3923
================

**Setup necessary library**

``` r
library(tidyverse)
```

## Problem 1

Aims: Merging *pols-month.csv*, *unemployment.csv*, and *snp.csv* into a
dataframe by using year/month as keys variable

**Import data**

``` r
pols_df = read_csv(file = "./fivethirtyeight_datasets/pols-month.csv")
unemployment_df = read.csv(file = "./fivethirtyeight_datasets/unemployment.csv")
snp_df = read.csv(file = "./fivethirtyeight_datasets/snp.csv")
```

**Step 1**: Cleaning *pols-month.csv*

1.  Break up `mon` (e.g., 1/15/1947) into integer variables
    `year`,`month`, and `day`

2.  Replace month number with month name

3.  Create `president`: taking values `gop` and `dem`

4.  Remove `prez_dem` and `prez_gop`, and the day variable

``` r
pols_df = pols_df |>
    janitor::clean_names() |>
    separate(mon, into = c("month","day","year"), convert = TRUE) |>
    mutate(
      president = ifelse(prez_gop == 1, "gop", "dem"),   
      month = factor(month, levels = 1:12, labels = month.abb, ordered = TRUE)  
           ) |>
    select(year, month, president,
           starts_with("gov"),
           starts_with("sen"),
           starts_with("rep")) |>
    arrange(year, month)
#Result
pols_df
```

    ## # A tibble: 822 × 9
    ##     year month president gov_gop gov_dem sen_gop sen_dem rep_gop rep_dem
    ##    <int> <ord> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl>
    ##  1  1947 Jan   dem            23      23      51      45     253     198
    ##  2  1947 Feb   dem            23      23      51      45     253     198
    ##  3  1947 Mar   dem            23      23      51      45     253     198
    ##  4  1947 Apr   dem            23      23      51      45     253     198
    ##  5  1947 May   dem            23      23      51      45     253     198
    ##  6  1947 Jun   dem            23      23      51      45     253     198
    ##  7  1947 Jul   dem            23      23      51      45     253     198
    ##  8  1947 Aug   dem            23      23      51      45     253     198
    ##  9  1947 Sep   dem            23      23      51      45     253     198
    ## 10  1947 Oct   dem            23      23      51      45     253     198
    ## # ℹ 812 more rows

**Step 2**: Cleaning *snp.csv*

Using a similar process to pol-month.csv

``` r
snp_df = snp_df |>
    janitor::clean_names() |>
    separate(date, into = c("month","day","year"), convert = TRUE) |>
    mutate(
        month = factor(month, levels = 1:12, labels = month.abb, ordered = TRUE)
      ) |>
    select(year, month, close) |>
    arrange(year, month)

#Result
head(snp_df, 10)
```

    ##    year month close
    ## 1  1950   Jan 17.05
    ## 2  1950   Feb 17.22
    ## 3  1950   Mar 17.29
    ## 4  1950   Apr 17.96
    ## 5  1950   May 18.78
    ## 6  1950   Jun 17.69
    ## 7  1950   Jul 17.84
    ## 8  1950   Aug 18.42
    ## 9  1950   Sep 19.45
    ## 10 1950   Oct 19.53

**Step 3**: Tidy *unemployment.csv*

1.  Switching from “wide” to “long” format

2.  Ensuring that key variables have the same name and take the same
    values.

``` r
unemployment_df = unemployment_df |>
    janitor::clean_names() |>
    pivot_longer(jan:dec, names_to = "month", values_to = "unemployment") |>
    mutate(month = factor(stringr::str_to_title(month),
           levels = month.abb, ordered = TRUE)) |>
    select(year, month, unemployment) |>
    arrange(year, month)

# show first 10 rows
head(unemployment_df, 10)
```

    ## # A tibble: 10 × 3
    ##     year month unemployment
    ##    <int> <ord>        <dbl>
    ##  1  1948 Jan            3.4
    ##  2  1948 Feb            3.8
    ##  3  1948 Mar            4  
    ##  4  1948 Apr            3.9
    ##  5  1948 May            3.5
    ##  6  1948 Jun            3.6
    ##  7  1948 Jul            3.6
    ##  8  1948 Aug            3.9
    ##  9  1948 Sep            3.8
    ## 10  1948 Oct            3.7

**Step 4**: Joining these 3 cleaned dataset

- Merging `snp` into `pols` and merging `unemployment` into the result.

``` r
Final_df = pols_df |>
    left_join(snp_df,  by = c("year","month")) |>
    left_join(unemployment_df, by = c("year","month")) |>
    arrange(year, month)

#Result
Final_df
```

    ## # A tibble: 822 × 11
    ##     year month president gov_gop gov_dem sen_gop sen_dem rep_gop rep_dem close
    ##    <int> <ord> <chr>       <dbl>   <dbl>   <dbl>   <dbl>   <dbl>   <dbl> <dbl>
    ##  1  1947 Jan   dem            23      23      51      45     253     198    NA
    ##  2  1947 Feb   dem            23      23      51      45     253     198    NA
    ##  3  1947 Mar   dem            23      23      51      45     253     198    NA
    ##  4  1947 Apr   dem            23      23      51      45     253     198    NA
    ##  5  1947 May   dem            23      23      51      45     253     198    NA
    ##  6  1947 Jun   dem            23      23      51      45     253     198    NA
    ##  7  1947 Jul   dem            23      23      51      45     253     198    NA
    ##  8  1947 Aug   dem            23      23      51      45     253     198    NA
    ##  9  1947 Sep   dem            23      23      51      45     253     198    NA
    ## 10  1947 Oct   dem            23      23      51      45     253     198    NA
    ## # ℹ 812 more rows
    ## # ℹ 1 more variable: unemployment <dbl>

**Description**: The cleaned *pols_df* dataset \[822 rows x 9
variables\] contains counts of governors (`gov_dem` or `gov_gop`),
senators (`sen_dem` or `sen_gop`), and representatives (`rep_dem` or
`rep_gop`) by party(i.e., Democratic and Republican) and the party of
the sitting president (`president`). Also, the cleaned *snp_df* dataset
\[787 rows x 3 variables\] contains the S&P monthly closing value
(`close`). Lastly, *unemployment_df* \[816 rows x 3 variables\] has the
monthly unemployment rate (`unemployment`). After combining these three
datasets by using `month` and `year` as key variables, the *Final_df*
has 822 rows and 11 variables, starting from January 1947 to June 2015.

## Problem 2

The *Mr. Trash Wheel* dataset consists of 6 sheets, and the sheets that
will be used in this problem are *Mr. Trash Wheel*,*Professor Trash
Wheel*, and *Gwynnda Trash Wheel*.

**Setup necessary library**

``` r
library(readxl)
```

Before I import the excel file, I change its name in the local folder to
*TrashWheel_data*

**Import data**

``` r
MrTrash_df = read_excel("./TrashWheel_data.xlsx", sheet = "Mr. Trash Wheel", skip = 1)
ProfTrash_df = read_excel("./TrashWheel_data.xlsx", sheet = "Professor Trash Wheel", skip = 1)
Gwyn_df = read_excel("./TrashWheel_data.xlsx", sheet = "Gwynnda Trash Wheel", skip = 1)
```
